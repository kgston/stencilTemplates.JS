var stencilTemplates=stencilTemplates||{};
(function(){var p={table:{id:"tableStencilTemplate",stencil:null,templateLoader:$.Deferred(),builder:function(r,m,q){return{dataset:{global:{},tableID:r,css:m,style:q,headers:[],rowSets:[]},addColumnCss:function(a,b){if(null==a)return stencilTemplates.util.log("Specify a style name"),this;if(null==b)return stencilTemplates.util.log("Specify a column index to style to"),this;null==this.dataset.global["columnCss"+b]&&(this.dataset.global["columnCss"+b]="");this.dataset.global["columnCss"+b]+=a+" ";
return this},addColumnStyle:function(a,b,c){if(null==a)return stencilTemplates.util.log("Specify a style name"),this;if(null==b)return stencilTemplates.util.log("Specify a value"),this;if(null==c)return stencilTemplates.util.log("Specify a column index to style to"),this;null==this.dataset.global["columnStyle"+c]&&(this.dataset.global["columnStyle"+c]="");this.dataset.global["columnStyle"+c]+=a+": "+b+"; ";return this},addHeaderRow:function(a,b,c){this.dataset.headers.push({headerID:a,css:b,style:c,
headerColumns:[]});return this},addHeaderColumn:function(a,b,c,e,d){if(0===this.dataset.headers.length)return stencilTemplates.util.log("There are no avaliable header rows to add columns to"),this;null==d&&(d=this.dataset.headers.length-1);null==this.dataset.headers[d]?stencilTemplates.util.log("The specified header row is undefined"):this.dataset.headers[d].headerColumns.push({columnID:b,css:c,style:e,content:a||""});return this},addHeaderDivider:function(a){if(0===this.dataset.headers.length)return stencilTemplates.util.log("There are no avaliable header rows to add dividers to"),
this;null==a&&(a=this.dataset.headers.length-1);null==this.dataset.headers[a]?stencilTemplates.util.log("The specified header row is undefined"):this.dataset.headers[a].css="tableHeaderDivider "+this.dataset.headers[a].css;return this},addRowSet:function(a,b,c){this.dataset.rowSets.push({rowSetID:a,css:b,style:c,rows:[],rowSetDivider:[]});return this},addRowSetDivider:function(a,b,c,e){if(0===this.dataset.rowSets.length)return stencilTemplates.util.log("There are no avaliable rowSets to add dividers to"),
this;null==e&&(e=this.dataset.rowSets.length-1);null==this.dataset.rowSets[e]?stencilTemplates.util.log("The specified rowSet is undefined"):this.dataset.rowSets[e].rowSetDivider.push({rowDividerID:a,css:b,style:c});return this},getRowSetSize:function(){return this.dataset.rowSets.length},addRow:function(a,b,c,e){if(0===this.dataset.rowSets.length)return stencilTemplates.util.log("There are no avaliable row sets, add a row set first"),this;null==e&&(e=this.dataset.rowSets.length-1);null==this.dataset.rowSets[e]?
stencilTemplates.util.log("The specified row set is undefined"):this.dataset.rowSets[e].rows.push({rowID:a,css:b,style:c,rowColumns:[],independentRowColumns:[]});return this},getRowSize:function(a){if(0===this.dataset.rowSets.length)stencilTemplates.util.log("There are no avaliable row sets, add a row set first");else if(null==a&&(a=this.dataset.rowSets.length-1),null==this.dataset.rowSets[a])stencilTemplates.util.log("The specified row set is undefined");else return this.dataset.rowSets[a].rows.length},
addRowColumn:function(a,b,c,e,d,g){if(0===this.dataset.rowSets.length)return stencilTemplates.util.log("There are no avaliable row sets, add a row set first"),this;null==d&&(d=this.dataset.rowSets.length-1);if(null==this.dataset.rowSets[d])return stencilTemplates.util.log("The specified row set is undefined"),this;if(0===this.dataset.rowSets[d].rows.length)return stencilTemplates.util.log("There are no avaliable rows in row set"),this;null==g&&(g=this.dataset.rowSets[d].rows.length-1);null==this.dataset.rowSets[d].rows[g]?
stencilTemplates.util.log("The specified row: "+g+" of rowSet: "+d+" is undefined"):this.dataset.rowSets[d].rows[g].rowColumns.push({columnID:b,css:c,style:e,content:a||""});return this},getDataset:function(){return this.dataset},clearDataset:function(){this.dataset.headers=[];this.dataset.rowSets=[];this.dataset.global={};this.dataset.tableSelector=null;return this},clearAll:function(){this.dataset={global:{},tableID:r,css:m,style:q,headers:[],rowSets:[]}},render:function(a){if(null==p.table.stencil)return p.table.templateLoader.done(function(){this.render(a)}.bind(this)),
this;var b=this,c=this.dataset,e=this.update,d=c.tableSort,g=c.tableSearch,f=c.tablePaginate,r=c.tableRowsDisplayed,k=c.tableSelector,h=stencilTemplates.util.cloneJSON(c),l=function(a,b){var c=0;this.columnIndexes.every(function(d,e){var f=this.sortFlow[e];c=a.rows[0].rowColumns[d].content<b.rows[0].rowColumns[d].content?-1*f:a.rows[0].rowColumns[d].content>b.rows[0].rowColumns[d].content?1*f:0;return 0===c?!0:!1},this);return c}.bind(d);if(null!=g){for(var n=g.lastSearchTerm.split(" ");0<=n.indexOf("");)n.splice(n.indexOf(""),
1);n.forEach(function(a,b){n[b]=new RegExp(a,"i")});if(0!==n.length)for(var m=0;m<h.rowSets.length;m++){var t=!1;h.rowSets[m].rows.every(function(a,b){if(null==g.searchRowIndexes||0<=g.searchRowIndexes.indexOf(b))a.rowColumns.every(function(a,b){if(null==g.searchColumnIndexes||0<=g.searchColumnIndexes.indexOf(b)){var w=0;n.forEach(function(b){0<=a.content.toString().search(b)&&w++});w===n.length&&(t=!0)}else return!0;return!t});else return!0;return!t});t||(h.rowSets.splice(m,1),m--)}}null!=d&&0<d.columnIndexes.length&&
(d.columnIndexes.forEach(function(b,a){h.headers[h.headers.length-1].headerColumns[b].sortIcon={css:1===d.sortFlow[a]?"st-tableSortUp":"st-tableSortDown"}}),h.rowSets.sort(l));if(null!=f){l=!1;do{var l=!1,q=[],u=0,v=1;f.currentPage>f.totalPages?(f.currentPage=f.totalPages,h.tablePaginate.currentPage=f.totalPages):1>f.currentPage&&(f.currentPage=1,h.tablePaginate.currentPage=1);h.rowSets.forEach(function(b){u+=b.rows.length;u>f.rowsPerPage&&(v++,u=b.rows.length);v===f.currentPage&&q.push(b)});f.totalPages=
v;h.tablePaginate.totalPages=v;1===f.currentPage&&(h.tablePaginate.prevPageStyle="visibility: hidden; ");f.currentPage===h.tablePaginate.totalPages&&(h.tablePaginate.nextPageStyle="visibility: hidden; ");f.currentPage>h.tablePaginate.totalPages?l=!0:h.rowSets=q}while(l)}l=p.table.stencil.render(h,"fragment");if(null!=d){var x=function(b){var a=this.tableSort;b=$(b);b=b.index();0>a.columnIndexes.indexOf(b)?(a.allowMultipleColumns||(a.columnIndexes=[],a.sortFlow=[]),a.columnIndexes.push(b),a.sortFlow.push(1)):
a.sortFlow[a.columnIndexes.indexOf(b)]*=-1}.bind(c),y=function(b){var a=this.tableSort;b=$(b);b=b.index();if(0<=a.columnIndexes.indexOf(b)){var c=a.columnIndexes.indexOf(b);a.columnIndexes.splice(c,1);a.sortFlow.splice(c,1);delete this.headers[this.headers.length-1].headerColumns[b].sortIcon}}.bind(c);l.find(".st-tableHeader").last().find(".st-tableHeaderColumns").each(function(a){if(null==d.limitSortColumns||null!=d.limitSortColumns&&0<=d.limitSortColumns.indexOf(a))this.onclick=function(){x(this);
e.bind(b)()},this.addEventListener("contextmenu",function(a){a.preventDefault();y(this);e.bind(b)();return!1},!1),this.className+="st-clickable "})}null!=g&&(l.find("#st-tableSearchInput").change(function(){g.lastSearchTerm=this.value.trim();e.bind(b)()}),l.find("#st-tableSearchClear").click(function(){""!==g.lastSearchTerm&&(g.lastSearchTerm="",e.bind(b)())}));null!=f&&(l.find("#st-tablePaginatePrevPageBtn").click(function(){f.currentPage--;e.bind(b)()}),l.find("#st-tablePaginateNextPageBtn").click(function(){f.currentPage++;
e.bind(b)()}),l.find("#st-tableCurrentPage").change(function(){var a=this.value.trim(),a=$.isNumeric(a)?parseFloat(a):1;f.currentPage=a;e.bind(b)()}),l.find("#st-tableRowsDisplayInput").change(function(){var a=this.value.trim(),a=$.isNumeric(a)?parseFloat(a):5;f.rowsPerPage=a;r.rowsPerPage=a;e.bind(b)()}));null!=k&&(k.selected={},l.find(".st-tableRowSet").addClass("clickable").click(function(){var a=$(this),b=[],d=!1;k.allowMultipleSelects||(k.selected={},d=a.hasClass("st-tableRowSetSelected"),$("#"+
c.tableID+" .st-tableRowSet").removeClass("st-tableRowSetSelected"));if(!d){var e=[];k.selectRowIndexes.forEach(function(b){var c=[],d=$(a[b]).find(".st-tableRowColumn");k.selectColumnIndexes.forEach(function(a){c.push(d[a].innerHTML.trim())});e.push(c)});b.push(e);null==k.selected[b]?k.selected[b]=b:delete k.selected[b];a.toggleClass("st-tableRowSetSelected")}if(null!=k.onClick)k.onClick(b)}).dblclick(function(){var a=$(this),b=[],c=[];k.selectRowIndexes.forEach(function(b){var d=[],e=$(a[b]).find(".st-tableRowColumn");
k.selectColumnIndexes.forEach(function(a){d.push(e[a].innerHTML.trim())});c.push(d)});b.push(c);if(null!=k.onDblClick)k.onDblClick(b)}));a(l);this.onComplete=a;return this},update:function(){"rendering"!==this.dataset.tableRenderState&&(this.dataset.tableRenderState="rendering",this.render(function(a){$("#"+this.dataset.tableID).replaceWith(a);this.dataset.tableRenderState="idle"}.bind(this)));return this},enableSort:function(a,b){var c=this.dataset;if(null!=b&&!Array.isArray(b))if($.isNumeric(b))b=
[b];else{stencilTemplates.util.log("Unable to implement sort on table "+this.dataset.tableID+" due to parameter error");return}null==c.tableSort&&(c.tableSort={allowMultipleColumns:a,limitSortColumns:b,columnIndexes:[],sortFlow:[]});return this},enableSearch:function(a,b){var c=this.dataset;if(null!=b&&!Array.isArray(b))if($.isNumeric(b))b=[b];else{stencilTemplates.util.log("Unable to implement search on table "+this.dataset.tableID+" due to parameter error");return}if(null!=a&&!Array.isArray(a))if($.isNumeric(a))a=
[a];else{stencilTemplates.util.log("Unable to implement search on table "+this.dataset.tableID+" due to parameter error");return}null==c.tableSearch&&(c.tableSearch={lastSearchTerm:"",searchRowIndexes:b,searchColumnIndexes:a});return this},enablePaginate:function(a){var b=this.dataset;if($.isNumeric(a))return null==b.tablePaginate&&(b.tablePaginate={rowsPerPage:a,currentPage:1,totalPages:1},b.tableRowsDisplayed={rowsPerPage:a}),this;stencilTemplates.util.log("Unable to implement pagination on table "+
this.dataset.tableID+" due to parameter error")},enableSelector:function(a,b,c,e,d){var g=this.dataset;if(null!=a&&!Array.isArray(a))if($.isNumeric(a))a=[a];else{stencilTemplates.util.log("Unable to implement selector on table "+this.dataset.tableID+" due to parameter error");return}if(null!=b&&!Array.isArray(b))if($.isNumeric(b))b=[b];else{stencilTemplates.util.log("Unable to implement selector on table "+this.dataset.tableID+" due to parameter error");return}g.tableSelector={selected:{},selectRowIndexes:a,
selectColumnIndexes:b,allowMultipleSelects:c||!1,onClick:e,onDblClick:d};return this},getSelected:function(){var a=[];Object.keys(this.dataset.tableSelector.selected).forEach(function(b){a.push(this[b])},this.dataset.tableSelector.selected);return a},emptySelected:function(){this.dataset.tableSelector.selected={};$("#"+this.dataset.tableID+" .st-tableRowSet").removeClass("st-tableRowSetSelected");return this}}}}},m=stencilTemplates.opts.templates;stencil.fetch(m.path+"/table"+m.stencilExt).progress(function(m){p.table.id=
m.tagID;p.table.stencil=m}).done(function(){p.table.templateLoader.resolve()});stencilTemplates.table=p.table.builder})(); //# sourceMappingURL=table-0.9.0.st.min.map
