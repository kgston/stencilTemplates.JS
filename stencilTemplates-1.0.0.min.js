var stencilTemplates=stencilTemplates||{};stencilTemplates.opts=$.extend(stencilTemplates.opts||{},function(){return{debug:!0,templatesPath:"js/stencilTemplates"}}());
stencilTemplates=$.extend(stencilTemplates,function(){var n={table:{id:"tableStencilTemplate",stencil:null,templateLoader:$.Deferred(),builder:function(r,p,h){return{dataset:{global:{},tableID:r,css:p,style:h,headers:[],rowSets:[]},addColumnStyle:function(a,b,c){if(null==a)return stencilTemplates.util.log("Specify a style name"),this;if(null==b)return stencilTemplates.util.log("Specify a value"),this;if(null==c)return stencilTemplates.util.log("Specify a column index to style to"),this;null==this.dataset.global["columnStyle"+
c]&&(this.dataset.global["columnStyle"+c]="");this.dataset.global["columnStyle"+c]+=a+": "+b+"; ";return this},addHeaderRow:function(a,b,c){this.dataset.headers.push({headerID:a,css:b,style:c,headerColumns:[]});return this},addHeaderColumn:function(a,b,c,e,d){if(0===this.dataset.headers.length)return stencilTemplates.util.log("There are no avaliable header rows to add columns to"),this;null==d&&(d=this.dataset.headers.length-1);null==this.dataset.headers[d]?stencilTemplates.util.log("The specified header row is undefined"):
this.dataset.headers[d].headerColumns.push({columnID:b,css:c,style:e,content:a||""});return this},addHeaderDivider:function(a){if(0===this.dataset.headers.length)return stencilTemplates.util.log("There are no avaliable header rows to add dividers to"),this;null==a&&(a=this.dataset.headers.length-1);null==this.dataset.headers[a]?stencilTemplates.util.log("The specified header row is undefined"):this.dataset.headers[a].css="tableHeaderDivider "+this.dataset.headers[a].css;return this},addRowSet:function(a,
b,c){this.dataset.rowSets.push({rowSetID:a,css:b,style:c,rows:[],rowSetDivider:[]});return this},addRowSetDivider:function(a,b,c,e){if(0===this.dataset.rowSets.length)return stencilTemplates.util.log("There are no avaliable rowSets to add dividers to"),this;null==e&&(e=this.dataset.rowSets.length-1);null==this.dataset.rowSets[e]?stencilTemplates.util.log("The specified rowSet is undefined"):this.dataset.rowSets[e].rowSetDivider.push({rowDividerID:a,css:b,style:c});return this},getRowSetSize:function(){return this.dataset.rowSets.length},
addRow:function(a,b,c,e){if(0===this.dataset.rowSets.length)return stencilTemplates.util.log("There are no avaliable row sets, add a row set first"),this;null==e&&(e=this.dataset.rowSets.length-1);null==this.dataset.rowSets[e]?stencilTemplates.util.log("The specified row set is undefined"):this.dataset.rowSets[e].rows.push({rowID:a,css:b,style:c,rowColumns:[],independentRowColumns:[]});return this},getRowSize:function(a){if(0===this.dataset.rowSets.length)stencilTemplates.util.log("There are no avaliable row sets, add a row set first");
else if(null==a&&(a=this.dataset.rowSets.length-1),null==this.dataset.rowSets[a])stencilTemplates.util.log("The specified row set is undefined");else return this.dataset.rowSets[a].rows.length},addRowColumn:function(a,b,c,e,d,g){if(0===this.dataset.rowSets.length)return stencilTemplates.util.log("There are no avaliable row sets, add a row set first"),this;null==d&&(d=this.dataset.rowSets.length-1);if(null==this.dataset.rowSets[d])return stencilTemplates.util.log("The specified row set is undefined"),
this;if(0===this.dataset.rowSets[d].rows.length)return stencilTemplates.util.log("There are no avaliable rows in row set"),this;null==g&&(g=this.dataset.rowSets[d].rows.length-1);null==this.dataset.rowSets[d].rows[g]?stencilTemplates.util.log("The specified row: "+g+" of rowSet: "+d+" is undefined"):this.dataset.rowSets[d].rows[g].rowColumns.push({columnID:b,css:c,style:e,content:a||""});return this},getDataset:function(){return this.dataset},clearDataset:function(){this.dataset.headers=[];this.dataset.rowSets=
[];this.dataset.global={};this.dataset.tableSelector=null;return this},clearAll:function(){this.dataset={global:{},tableID:r,css:p,style:h,headers:[],rowSets:[]}},render:function(a){if(null==n.table.stencil)n.table.templateLoader.done(function(){this.render(a)}.bind(this));else{var b=this,c=this.dataset,e=this.update,d=c.tableSort,g=c.tableSearch,f=c.tablePaginate,r=c.tableRowsDisplayed,l=c.tableSelector,k=stencilTemplates.util.cloneJSON(c),m=function(a,b){var c=0;this.columnIndexes.every(function(d,
e){var f=this.sortFlow[e];c=a.rows[0].rowColumns[d].content<b.rows[0].rowColumns[d].content?-1*f:a.rows[0].rowColumns[d].content>b.rows[0].rowColumns[d].content?1*f:0;return 0===c?!0:!1},this);return c}.bind(d);if(null!=g){for(var q=g.lastSearchTerm.split(" ");0<=q.indexOf("");)q.splice(q.indexOf(""),1);q.forEach(function(a,b){q[b]=new RegExp(a,"i")});if(0!==q.length)for(var h=0;h<k.rowSets.length;h++){var p=!1;k.rowSets[h].rows.every(function(a,b){if(null==g.searchRowIndexes||0<=g.searchRowIndexes.indexOf(b))a.rowColumns.every(function(a,
b){if(null==g.searchColumnIndexes||0<=g.searchColumnIndexes.indexOf(b)){var v=0;q.forEach(function(b){0<=a.content.toString().search(b)&&v++});v===q.length&&(p=!0)}else return!0;return!p});else return!0;return!p});p||(k.rowSets.splice(h,1),h--)}}null!=d&&0<d.columnIndexes.length&&(d.columnIndexes.forEach(function(a,b){k.headers[k.headers.length-1].headerColumns[a].sortIcon={css:1===d.sortFlow[b]?"st-tableSortUp":"st-tableSortDown"}}),k.rowSets.sort(m));if(null!=f){m=!1;do{var m=!1,w=[],t=0,u=1;f.currentPage>
f.totalPages?(f.currentPage=f.totalPages,k.tablePaginate.currentPage=f.totalPages):1>f.currentPage&&(f.currentPage=1,k.tablePaginate.currentPage=1);k.rowSets.forEach(function(a){t+=a.rows.length;t>f.rowsPerPage&&(u++,t=a.rows.length);u===f.currentPage&&w.push(a)});f.totalPages=u;k.tablePaginate.totalPages=u;1===f.currentPage&&(k.tablePaginate.prevPageStyle="visibility: hidden; ");f.currentPage===k.tablePaginate.totalPages&&(k.tablePaginate.nextPageStyle="visibility: hidden; ");f.currentPage>k.tablePaginate.totalPages?
m=!0:k.rowSets=w}while(m)}m=n.table.stencil.render(k,"fragment");if(null!=d){var x=function(a){var b=this.tableSort;a=$(a);a=a.index();0>b.columnIndexes.indexOf(a)?(b.allowMultipleColumns||(b.columnIndexes=[],b.sortFlow=[]),b.columnIndexes.push(a),b.sortFlow.push(1)):b.sortFlow[b.columnIndexes.indexOf(a)]*=-1}.bind(c),y=function(a){var b=this.tableSort;a=$(a);a=a.index();if(0<=b.columnIndexes.indexOf(a)){var c=b.columnIndexes.indexOf(a);b.columnIndexes.splice(c,1);b.sortFlow.splice(c,1);delete this.headers[this.headers.length-
1].headerColumns[a].sortIcon}}.bind(c);m.find(".st-tableHeader").last().find(".st-tableHeaderColumns").each(function(a){if(null==d.limitSortColumns||null!=d.limitSortColumns&&0<=d.limitSortColumns.indexOf(a))this.onclick=function(){x(this);e.bind(b)()},this.addEventListener("contextmenu",function(a){a.preventDefault();y(this);e.bind(b)();return!1},!1),this.className+="st-clickable "})}null!=g&&(m.find("#st-tableSearchInput").change(function(){g.lastSearchTerm=this.value.trim();e.bind(b)()}),m.find("#st-tableSearchClear").click(function(){""!==
g.lastSearchTerm&&(g.lastSearchTerm="",e.bind(b)())}));null!=f&&(m.find("#st-tablePaginatePrevPageBtn").click(function(){f.currentPage--;e.bind(b)()}),m.find("#st-tablePaginateNextPageBtn").click(function(){f.currentPage++;e.bind(b)()}),m.find("#st-tableCurrentPage").change(function(){var a=this.value.trim(),a=$.isNumeric(a)?parseFloat(a):1;f.currentPage=a;e.bind(b)()}),m.find("#st-tableRowsDisplayInput").change(function(){var a=this.value.trim(),a=$.isNumeric(a)?parseFloat(a):5;f.rowsPerPage=a;r.rowsPerPage=
a;e.bind(b)()}));null!=l&&(l.selected={},m.find(".st-tableRowSet").addClass("clickable").click(function(){var a=$(this),b=[],d=!1;l.allowMultipleSelects||(l.selected={},d=a.hasClass("st-tableRowSetSelected"),$("#"+c.tableID+" .st-tableRowSet").removeClass("st-tableRowSetSelected"));d||(l.selectRowIndexes.forEach(function(c){var d=$(a[c]).find(".st-tableRowColumn");l.selectColumnIndexes.forEach(function(a){b.push(d[a].innerHTML.trim())})}),null==l.selected[b]?l.selected[b]=b:delete l.selected[b],a.toggleClass("st-tableRowSetSelected"));
if(null!=l.onClick)l.onClick(b)}).dblclick(function(){var a=$(this),b=[];l.selectRowIndexes.forEach(function(c){var d=$(a[c]).find(".st-tableRowColumn");l.selectColumnIndexes.forEach(function(a){b.push(d[a].innerHTML.trim())})});if(null!=l.onDblClick)l.onDblClick(b)}));a(m);this.onComplete=a}},update:function(){"rendering"!==this.dataset.tableRenderState&&(this.dataset.tableRenderState="rendering",this.render(function(a){$("#"+this.dataset.tableID).replaceWith(a);this.dataset.tableRenderState="idle"}.bind(this)));
return this},enableSort:function(a,b){var c=this.dataset;if(null!=b&&!Array.isArray(b))if($.isNumeric(b))b=[b];else{stencilTemplates.util.log("Unable to implement sort on table "+this.dataset.tableID+" due to parameter error");return}null==c.tableSort&&(c.tableSort={allowMultipleColumns:a,limitSortColumns:b,columnIndexes:[],sortFlow:[]});return this},enableSearch:function(a,b){var c=this.dataset;if(null!=b&&!Array.isArray(b))if($.isNumeric(b))b=[b];else{stencilTemplates.util.log("Unable to implement search on table "+
this.dataset.tableID+" due to parameter error");return}if(null!=a&&!Array.isArray(a))if($.isNumeric(a))a=[a];else{stencilTemplates.util.log("Unable to implement search on table "+this.dataset.tableID+" due to parameter error");return}null==c.tableSearch&&(c.tableSearch={lastSearchTerm:"",searchRowIndexes:b,searchColumnIndexes:a});return this},enablePaginate:function(a){var b=this.dataset;if($.isNumeric(a))return null==b.tablePaginate&&(b.tablePaginate={rowsPerPage:a,currentPage:1,totalPages:1},b.tableRowsDisplayed=
{rowsPerPage:a}),this;stencilTemplates.util.log("Unable to implement pagination on table "+this.dataset.tableID+" due to parameter error")},enableSelector:function(a,b,c,e,d){var g=this.dataset;if(null!=a&&!Array.isArray(a))if($.isNumeric(a))a=[a];else{stencilTemplates.util.log("Unable to implement selector on table "+this.dataset.tableID+" due to parameter error");return}if(null!=b&&!Array.isArray(b))if($.isNumeric(b))b=[b];else{stencilTemplates.util.log("Unable to implement selector on table "+
this.dataset.tableID+" due to parameter error");return}g.tableSelector={selected:{},selectRowIndexes:a,selectColumnIndexes:b,allowMultipleSelects:c||!1,onClick:e,onDblClick:d};return this},getSelected:function(){var a=[];Object.keys(this.dataset.tableSelector.selected).forEach(function(b){a.push(this[b])},this.dataset.tableSelector.selected);return a},emptySelected:function(){this.dataset.tableSelector.selected={};$("#"+this.dataset.tableID+" .st-tableRowSet").removeClass("st-tableRowSetSelected");
return this}}}}},h=function(){Object.keys(n).forEach(function(h){stencil.fetch(stencilTemplates.opts.templatesPath+"/"+h+".stencilTemplate").progress(function(p){n[h].id=p.tagID;n[h].stencil=p}).done(function(){n[h].templateLoader.resolve()})})};$("head").ready(function(){stencil?(h(),stencilTemplates.util.log(n)):stencilTemplates.util.log("stencil.js has not been imported",!0)});return{table:n.table.builder}}());
stencilTemplates.util=$.extend(stencilTemplates.util||{},function(){return{log:function(n,h){stencilTemplates.opts.debug?console.log("[debug] Stencil Templates: "+n):h&&console.log("Stencil Templates: "+n)},cloneJSON:function(n){return JSON.parse(JSON.stringify(n))}}}()); //# sourceMappingURL=stencilTemplates-1.0.0.min.map
